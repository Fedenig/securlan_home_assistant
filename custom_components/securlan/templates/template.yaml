# Lista aiutanti template sensor.
template:
# Url RestCommand    
  - sensor:
      - name: "rest_url"
        state: !secret rest_command_url

# Trigger Bubble Card
  - trigger:
      - trigger: event
        event_type: bubble_card_update_modules
    sensor:
      - name: "Bubble Card Modules"
        state: "saved"
        icon: "mdi:puzzle"
        attributes:
          modules: "{{ trigger.event.data.modules }}"
          last_updated: "{{ trigger.event.data.last_updated }}"
          
# Diagnostica
  - sensor:
      - name: "Stato personalizzato rete 220V"
        unique_id: "stato_personalizzato_rete_220v"
        state: >
            {{  'Presente' if states('input_boolean.rete_220v') == 'on' else 'Assente' }}
        icon: >
            {{  'mdi:power-plug' if states('input_boolean.rete_220v') == 'on' else 'mdi:power-plug-off' }}
            
      - name: "Stato personalizzato batteria centrale"
        unique_id: "stato_personalizzato_batteria_centrale"
        state: >
            {{  'Normale' if states('input_boolean.batteria_centrale') == 'on' else 'Anomalia' }}
        icon: >
            {{  'mdi:battery' if states('input_boolean.batteria_centrale') == 'on' else 'mdi:battery-off' }}         

      - name: "Stato personalizzato tamper centrale"
        unique_id: "stato_personalizzato_tamper_centrale"
        state: >
            {{  'Chiuso' if states('input_boolean.tamper_centrale') == 'on' else 'Aperto/Allarme' }}
        icon: >     
            {{  'mdi:shield-lock' if states('input_boolean.tamper_centrale') == 'on' else 'mdi:shield-lock-open' }}

      - name: "Stato personalizzato tamper sirena"
        unique_id: "stato_personalizzato_tamper_sirena"
        state: >
            {{  'Chiuso' if states('input_boolean.tamper_sirena') == 'on' else 'Aperto/Allarme' }}
        icon: >     
            {{  'mdi:shield-lock' if states('input_boolean.tamper_sirena') == 'on' else 'mdi:shield-lock-open' }}
